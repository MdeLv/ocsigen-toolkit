<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="Start" href="index.html">
<link rel="previous" href="Ot_page_transition.html">
<link rel="next" href="Ot_popup.html">
<link rel="Up" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of class methods" rel=Appendix href="index_methods.html">
<link title="Index of class types" rel=Appendix href="index_class_types.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Ot_buttons" rel="Chapter" href="Ot_buttons.html">
<link title="Ot_calendar" rel="Chapter" href="Ot_calendar.html">
<link title="Ot_carousel" rel="Chapter" href="Ot_carousel.html">
<link title="Ot_color_picker" rel="Chapter" href="Ot_color_picker.html">
<link title="Ot_drawer" rel="Chapter" href="Ot_drawer.html">
<link title="Ot_form" rel="Chapter" href="Ot_form.html">
<link title="Ot_lib" rel="Chapter" href="Ot_lib.html">
<link title="Ot_nodeready" rel="Chapter" href="Ot_nodeready.html">
<link title="Ot_noderesize" rel="Chapter" href="Ot_noderesize.html">
<link title="Ot_page_transition" rel="Chapter" href="Ot_page_transition.html">
<link title="Ot_picture_uploader" rel="Chapter" href="Ot_picture_uploader.html">
<link title="Ot_popup" rel="Chapter" href="Ot_popup.html">
<link title="Ot_range" rel="Chapter" href="Ot_range.html">
<link title="Ot_size" rel="Chapter" href="Ot_size.html">
<link title="Ot_social_meta" rel="Chapter" href="Ot_social_meta.html">
<link title="Ot_spinner" rel="Chapter" href="Ot_spinner.html">
<link title="Ot_sticky" rel="Chapter" href="Ot_sticky.html">
<link title="Ot_style" rel="Chapter" href="Ot_style.html">
<link title="Ot_swipe" rel="Chapter" href="Ot_swipe.html">
<link title="Ot_time_picker" rel="Chapter" href="Ot_time_picker.html">
<link title="Ot_tip" rel="Chapter" href="Ot_tip.html">
<link title="Ot_toggle" rel="Chapter" href="Ot_toggle.html"><link title="Picture uploader widget" rel="Section" href="#2_Pictureuploaderwidget">
<title>Ot_picture_uploader</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Ot_page_transition.html" title="Ot_page_transition">Previous</a>
&nbsp;<a class="up" href="index.html" title="Index">Up</a>
&nbsp;<a class="post" href="Ot_popup.html" title="Ot_popup">Next</a>
</div>
<h1>Module <a href="type_Ot_picture_uploader.html">Ot_picture_uploader</a></h1>

<pre><span id="MODULEOt_picture_uploader"><span class="keyword">module</span> Ot_picture_uploader</span>: <code class="code"><span class="keyword">sig</span></code> <a href="Ot_picture_uploader.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><hr width="100%">
<h3 id="2_Pictureuploaderwidget">Picture uploader widget</h3>
<p><code class="code"><span class="constructor">Ot_picture_uploader</span></code> allows the user to see a picture he wants to
    send to the before sending it server.  Also, controllers can be
    added to allow the user to specify a cropping area. No cropping is
    actually done on the client side, it MUST be handled on server
    side.</p>

<pre><span id="TYPEcropping"><span class="keyword">type</span> <code class="type"></code>cropping</span> = <code class="type">(float * float * float * float) React.S.t</code> </pre>


<pre><span id="TYPEupload"><span class="keyword">type</span> <code class="type">'a</code> upload</span> = <code class="type">?progress:(int -> int -> unit) -><br>       ?cropping:<a href="Ot_picture_uploader.html#TYPEcropping">cropping</a> -><br>       Js_of_ocaml.File.file Js_of_ocaml.Js.t -> 'a Lwt.t</code> </pre>


<pre><span id="TYPEservice"><span class="keyword">type</span> <code class="type">('a, 'b)</code> service</span> = <code class="type">(unit, 'a * ((float * float * float * float) option * Eliom_lib.file_info),<br>        Eliom_service.post, Eliom_service.non_att, Eliom_service.co,<br>        Eliom_service.non_ext, Eliom_service.reg, [ `WithoutSuffix ], unit,<br>        [ `One of 'a Eliom_parameter.ocaml ] Eliom_parameter.param_name *<br>        ([ `One of (float * float * float * float) option Eliom_parameter.ocaml ]<br>         Eliom_parameter.param_name *<br>         [ `One of Eliom_lib.file_info ] Eliom_parameter.param_name),<br>        'b Eliom_service.ocaml)<br>       Eliom_service.t</code> </pre>
<div class="info ">
<div class="info-desc">
<p>a service that implements a function with type <code class="code"><span class="keywordsign">'</span>a&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="keywordsign">'</span>b</code></p>
</div>
</div>


<pre><span id="VALocaml_service_upload"><span class="keyword">val</span> ocaml_service_upload</span> : <code class="type">service:('a, 'b) <a href="Ot_picture_uploader.html#TYPEservice">service</a> -><br>       arg:'a -> 'b <a href="Ot_picture_uploader.html#TYPEupload">upload</a></code></pre>
<pre><span id="VALcropper"><span class="keyword">val</span> cropper</span> : <code class="type">image:Js_of_ocaml.Dom_html.element Js_of_ocaml.Js.t Eliom_client_value.t -><br>       ?ratio:float -><br>       unit -><br>       (unit -> unit) * <a href="Ot_picture_uploader.html#TYPEcropping">cropping</a> *<br>       [> `Div ] Eliom_content.Html.elt</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">&nbsp;<span class="keyword">let</span>&nbsp;(reset,&nbsp;cropping,&nbsp;cropper_dom)&nbsp;=&nbsp;cropper&nbsp;~image&nbsp;()&nbsp;</code>
    <code class="code">&nbsp;reset&nbsp;</code> is function to call to reset the current cropper status
    <code class="code">&nbsp;cropping&nbsp;</code> are current cropping parameters
    <code class="code">&nbsp;cropper_dom&nbsp;</code> is the div containing cropping controllers</p>
</div>
</div>

<pre><span id="VALbind_input"><span class="keyword">val</span> bind_input</span> : <code class="type">Js_of_ocaml.Dom_html.inputElement Js_of_ocaml.Js.t Eliom_client_value.t -><br>       Js_of_ocaml.Dom_html.imageElement Js_of_ocaml.Js.t Eliom_client_value.t -><br>       ?container:#Js_of_ocaml.Dom_html.element Js_of_ocaml.Js.t<br>                  Eliom_client_value.t -><br>       ?reset:(unit -> unit) -> unit -> unit</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">bind_input&nbsp;input&nbsp;preview&nbsp;?container&nbsp;?reset&nbsp;()</code>
    Bind <code class="code">input</code> and <code class="code">preview</code> so the file selected in <code class="code">input</code> is the
    image displayed in <code class="code">preview</code>.
    <code class="code">?container</code> is used to toggle <code class="code">ot-no-file</code> class.
    <code class="code">?reset</code> is called when the <code class="code">input</code> value changes.</p>
</div>
</div>

<pre><span id="VALdo_submit"><span class="keyword">val</span> do_submit</span> : <code class="type">Js_of_ocaml.Dom_html.inputElement Js_of_ocaml.Js.t Eliom_client_value.t -><br>       ?progress:(int -> int -> unit) -><br>       ?cropping:<a href="Ot_picture_uploader.html#TYPEcropping">cropping</a> -><br>       upload:'a <a href="Ot_picture_uploader.html#TYPEupload">upload</a> -> unit -> unit Lwt.t</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">&nbsp;do_submit&nbsp;input&nbsp;?cropping&nbsp;~upload&nbsp;()&nbsp;</code>
    <code class="code">input</code> is the input with file loaded
    <code class="code">cropping</code> are cropping info
    <code class="code">upload</code> function to upload the file</p>
</div>
</div>

<pre><span id="VALbind_submit"><span class="keyword">val</span> bind_submit</span> : <code class="type">Js_of_ocaml.Dom_html.inputElement Js_of_ocaml.Js.t Eliom_client_value.t -><br>       #Js_of_ocaml.Dom_html.eventTarget Js_of_ocaml.Js.t Eliom_client_value.t -><br>       ?cropping:<a href="Ot_picture_uploader.html#TYPEcropping">cropping</a> -><br>       upload:'a <a href="Ot_picture_uploader.html#TYPEupload">upload</a> -><br>       after_submit:(unit -> unit Lwt.t) -> unit -> unit</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">&nbsp;bind_submit&nbsp;input&nbsp;button&nbsp;?cropping&nbsp;~upload&nbsp;~after_submit&nbsp;()&nbsp;</code>
    binds the following two actions to <code class="code">&nbsp;button&nbsp;</code> when it is being clicked:
    call <code class="code">&nbsp;do_submit&nbsp;</code> which uploads the file; then call <code class="code">&nbsp;after_submit&nbsp;</code></p>
</div>
</div>

<pre><span id="VALbind"><span class="keyword">val</span> bind</span> : <code class="type">?container:#Js_of_ocaml.Dom_html.element Js_of_ocaml.Js.t<br>                  Eliom_client_value.t -><br>       input:Js_of_ocaml.Dom_html.inputElement Js_of_ocaml.Js.t Eliom_client_value.t -><br>       preview:Js_of_ocaml.Dom_html.imageElement Js_of_ocaml.Js.t -><br>       ?crop:(unit -> unit) * <a href="Ot_picture_uploader.html#TYPEcropping">cropping</a> -><br>       submit:#Js_of_ocaml.Dom_html.eventTarget Js_of_ocaml.Js.t<br>              Eliom_client_value.t -><br>       upload:'a <a href="Ot_picture_uploader.html#TYPEupload">upload</a> -><br>       after_submit:(unit -> unit Lwt.t) -> unit -> unit</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">bind</code> is a shortcut for <code class="code">bind_input</code> and <code class="code">bind_submit</code> actions</p>
</div>
</div>

<pre><span id="VALinput"><span class="keyword">val</span> input</span> : <code class="type">?a:[< Html_types.label_attrib > `Class ] Eliom_content.Html.attrib list -><br>       [< Html_types.label_content_fun ] Eliom_content.Html.elt list -><br>       [> `Input ] Eliom_content.Html.elt * [> `Label ] Eliom_content.Html.elt</code></pre><div class="info ">
<div class="info-desc">
<p>Create a file input element with good input type <code class="code">ot-pup-input</code> class
    and wrap it into a label.
    Return (input node, label node)</p>
</div>
</div>

<pre><span id="VALpreview"><span class="keyword">val</span> preview</span> : <code class="type">?a:[< Html_types.img_attrib > `Class ] Eliom_content.Html.attrib list -><br>       unit -> [> `Img ] Eliom_content.Html.elt</code></pre><div class="info ">
<div class="info-desc">
<p>Create a img element with no src, no alt and <code class="code">ot-pup-preview</code> class.</p>
</div>
</div>

<pre><span id="VALsubmit"><span class="keyword">val</span> submit</span> : <code class="type">?a:[< Html_types.button_attrib > `Class ] Eliom_content.Html.attrib list -><br>       [< Html_types.button_content ] Eliom_content.Html.elt list -><br>       [> `Button ] Eliom_content.Html.elt</code></pre><div class="info ">
<div class="info-desc">
<p>Create a button with <code class="code">ot-pup-sumit</code> clas</p>
</div>
</div>

<pre><span id="VALmk_form"><span class="keyword">val</span> mk_form</span> : <code class="type">?after_submit:(unit -> unit Lwt.t) -><br>       ?crop:float option -><br>       ?input:[< Html_types.label_attrib > `Class ] Eliom_content.Html.attrib list *<br>              [< Html_types.label_content_fun ] Eliom_content.Html.elt list -><br>       ?submit:[< Html_types.button_attrib > `Class ] Eliom_content.Html.attrib list *<br>               [< Html_types.button_content_fun ] Eliom_content.Html.elt list -><br>       'a <a href="Ot_picture_uploader.html#TYPEupload">upload</a> -> [> `Form ] Eliom_content.Html.elt Lwt.t</code></pre><div class="info ">
<div class="info-desc">
<p>Ready-to-use form. Customizable with
    <code class="code">input</code>, the input button content, <code class="code">submit</code>, the submit button content.
    If <code class="code">crop</code> is present, cropping is enable, with the optional ratio it is.
    The last argument determines the method by which the file is uploaded.</p>
</div>
</div>
</body></html>
